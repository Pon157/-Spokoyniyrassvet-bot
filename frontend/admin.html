<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель администратора</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/light-theme.css" id="theme-style">
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1>Панель администратора</h1>
            <div class="admin-actions">
                <button id="backToChat" class="btn btn-secondary">← К чату</button>
                <button id="refreshData" class="btn btn-primary">Обновить</button>
            </div>
        </div>

        <div class="admin-content">
            <!-- Статистика -->
            <div class="stats-section">
                <h3>Статистика системы</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>Всего пользователей</h4>
                        <span id="totalUsers">0</span>
                    </div>
                    <div class="stat-card">
                        <h4>Слушателей</h4>
                        <span id="totalListeners">0</span>
                    </div>
                    <div class="stat-card">
                        <h4>Администраторов</h4>
                        <span id="totalAdmins">0</span>
                    </div>
                    <div class="stat-card">
                        <h4>Всего чатов</h4>
                        <span id="totalChats">0</span>
                    </div>
                    <div class="stat-card">
                        <h4>Сообщений</h4>
                        <span id="totalMessages">0</span>
                    </div>
                    <div class="stat-card">
                        <h4>Активных чатов</h4>
                        <span id="activeChats">0</span>
                    </div>
                </div>
            </div>

            <!-- Пользователи -->
            <div class="section">
                <h3>Управление пользователями</h3>
                <div class="table-container">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>Имя</th>
                                <th>Email</th>
                                <th>Роль</th>
                                <th>Статус</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Чаты -->
            <div class="section">
                <h3>Все чаты</h3>
                <div class="table-container">
                    <table class="chats-table">
                        <thead>
                            <tr>
                                <th>Участники</th>
                                <th>Статус</th>
                                <th>Обновлен</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="chatsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Модальные окна -->
            <div id="userActionsModal" class="modal hidden">
                <div class="modal-content">
                    <h3>Действия с пользователем</h3>
                    <div class="user-info" id="modalUserInfo"></div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-warning" data-action="warn">Предупреждение</button>
                        <button class="btn btn-secondary" data-action="mute">Мут</button>
                        <button class="btn btn-danger" data-action="block">Блокировка</button>
                        <button class="btn btn-primary" data-action="viewChats">Просмотр чатов</button>
                    </div>
                    
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="closeModal">Закрыть</button>
                    </div>
                </div>
            </div>

            <div id="actionReasonModal" class="modal hidden">
                <div class="modal-content">
                    <h3 id="actionTitle"></h3>
                    <form id="actionForm">
                        <div class="form-group">
                            <label for="actionReason">Причина:</label>
                            <textarea id="actionReason" rows="3" required></textarea>
                        </div>
                        <div id="muteDurationGroup" class="form-group hidden">
                            <label for="muteDuration">Длительность (минуты):</label>
                            <input type="number" id="muteDuration" value="60" min="1">
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary" id="cancelAction">Отмена</button>
                            <button type="submit" class="btn btn-primary">Применить</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="chatMessagesModal" class="modal hidden">
                <div class="modal-content large">
                    <h3>Сообщения чата</h3>
                    <div class="messages-list" id="modalMessagesList"></div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="closeMessagesModal">Закрыть</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
