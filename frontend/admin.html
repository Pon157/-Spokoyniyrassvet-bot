<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç –°–∏—Å—Ç–µ–º–∞ - –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/light-theme.css" id="theme-style">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="container">
                <h1 class="logo">üí¨ –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h1>
                <div class="header-actions">
                    <span id="userWelcome"></span>
                    <div class="theme-selector">
                        <button class="btn btn-icon" id="themeToggle">üé®</button>
                        <div class="theme-dropdown" id="themeDropdown">
                            <div class="theme-option" data-theme="light">üåû –°–≤–µ—Ç–ª–∞—è</div>
                            <div class="theme-option" data-theme="dark">üåô –¢–µ–º–Ω–∞—è</div>
                            <div class="theme-option" data-theme="blue">üîµ –°–∏–Ω—è—è</div>
                            <div class="theme-option" data-theme="green">üü¢ –ó–µ–ª–µ–Ω–∞—è</div>
                        </div>
                    </div>
                    <button class="btn btn-outline" onclick="openSettings()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="btn btn-outline" onclick="openChat()">üí¨ –ß–∞—Ç</button>
                    <button class="btn btn-outline" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
                </div>
            </div>
        </header>

        <main class="admin-container">
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <section class="stats-section">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <span class="stat-number" id="totalUsers">0</span>
                        <span class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="totalListeners">0</span>
                        <span class="stat-label">–°–ª—É—à–∞—Ç–µ–ª–µ–π</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="totalChats">0</span>
                        <span class="stat-label">–í—Å–µ–≥–æ —á–∞—Ç–æ–≤</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="activeChats">0</span>
                        <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="totalMessages">0</span>
                        <span class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π</span>
                    </div>
                </div>
            </section>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
            <section class="users-section mt-3">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                    <div class="section-actions">
                        <select id="roleFilter" onchange="adminManager.loadUsers()">
                            <option value="">–í—Å–µ —Ä–æ–ª–∏</option>
                            <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                            <option value="listener">–°–ª—É—à–∞—Ç–µ–ª–∏</option>
                            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</option>
                        </select>
                        <button class="btn btn-primary" onclick="adminManager.sendNotification()">
                            üìß –†–∞—Å—Å—ã–ª–∫–∞
                        </button>
                    </div>
                </div>
                
                <div class="users-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–†–æ–ª—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination" id="usersPagination">
                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                </div>
            </section>

            <!-- –ú–æ–¥–µ—Ä–∞—Ü–∏—è —á–∞—Ç–æ–≤ -->
            <section class="chats-section mt-3">
                <h2>–ú–æ–¥–µ—Ä–∞—Ü–∏—è —á–∞—Ç–æ–≤</h2>
                <div class="chats-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID —á–∞—Ç–∞</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–°–ª—É—à–∞—Ç–µ–ª—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–°–æ–æ–±—â–µ–Ω–∏–π</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="chatsTableBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <section class="notifications-section mt-3">
                <div class="section-header">
                    <h2>–°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                    <button class="btn btn-primary" onclick="adminManager.sendSystemNotification()">
                        üì¢ –°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    </button>
                </div>
                <div class="notifications-list" id="notificationsList">
                    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
                </div>
            </section>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div id="userActionsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalUserName">–î–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</h3>
                    <button class="btn btn-icon" onclick="closeUserActionsModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="action-buttons">
                        <button class="btn btn-warning" onclick="adminManager.showWarningModal()">
                            ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
                        </button>
                        <button class="btn btn-secondary" onclick="adminManager.showMuteModal()">
                            üîá –ú—É—Ç
                        </button>
                        <button class="btn btn-danger" onclick="adminManager.showBanModal()">
                            üö´ –ë–∞–Ω
                        </button>
                        <button class="btn btn-success" onclick="adminManager.showRoleModal()">
                            üëë –°–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="notificationModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <button class="btn btn-icon" onclick="closeNotificationModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <input type="text" id="notificationTitle" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫">
                    </div>
                    <div class="form-group">
                        <label>–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                        <textarea id="notificationMessage" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø</label>
                        <select id="notificationType">
                            <option value="info">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</option>
                            <option value="warning">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</option>
                            <option value="success">–£—Å–ø–µ—Ö</option>
                            <option value="error">–û—à–∏–±–∫–∞</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeNotificationModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="adminManager.sendNotificationToUsers()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div id="message" class="message"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
