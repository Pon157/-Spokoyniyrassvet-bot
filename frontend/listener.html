<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ª—É—à–∞—Ç–µ–ª—å - –°–ø–æ–∫–æ–π–Ω—ã–π —Ä–∞—Å—Å–≤–µ—Ç</title>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/modern.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/js/listener.js"></script>
</head>
<body>
    <div class="listener-app">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="app-logo">
                    <div class="logo-icon">üåÖ</div>
                    <span class="logo-text">–°–ø–æ–∫–æ–π–Ω—ã–π –†–∞—Å—Å–≤–µ—Ç</span>
                </div>
                <div class="user-role-badge">–°–ª—É—à–∞—Ç–µ–ª—å</div>
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-chart-bar nav-icon"></i>
                    <span class="nav-text">–î–∞—à–±–æ—Ä–¥</span>
                </a>
                <a href="#chats" class="nav-item" data-tab="chats">
                    <i class="fas fa-comments nav-icon"></i>
                    <span class="nav-text">–ú–æ–∏ —á–∞—Ç—ã</span>
                    <span class="nav-badge" id="chatsBadge">0</span>
                </a>
                <a href="#listeners-chat" class="nav-item" data-tab="listeners-chat">
                    <i class="fas fa-users nav-icon"></i>
                    <span class="nav-text">–ß–∞—Ç —Å–ª—É—à–∞—Ç–µ–ª–µ–π</span>
                </a>
                <a href="#reviews" class="nav-item" data-tab="reviews">
                    <i class="fas fa-star nav-icon"></i>
                    <span class="nav-text">–û—Ç–∑—ã–≤—ã</span>
                </a>
                <a href="#statistics" class="nav-item" data-tab="statistics">
                    <i class="fas fa-chart-line nav-icon"></i>
                    <span class="nav-text">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                </a>
            </nav>

            <!-- –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω -->
            <div class="status-widget">
                <div class="status-toggle">
                    <label class="toggle-label">
                        <input type="checkbox" id="onlineToggle" checked>
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">–û–Ω–ª–∞–π–Ω</span>
                    </label>
                </div>
                <div class="status-indicator online" id="statusIndicator">
                    <div class="indicator-dot"></div>
                    <span>–î–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —á–∞—Ç–æ–≤</span>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div class="user-profile">
                <div class="user-avatar">
                    <img src="/images/default-avatar.svg" alt="–ê–≤–∞—Ç–∞—Ä" id="userAvatar" onerror="this.src='/images/default-avatar.svg'">
                </div>
                <div class="user-info">
                    <div class="user-name" id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div class="user-stats">
                        <span class="stat" id="userRating"><i class="fas fa-star"></i> 0.0</span>
                        <span class="stat" id="userSessions"><i class="fas fa-comment"></i> 0</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <header class="content-header">
                <h1 class="page-title" id="pageTitle">–î–∞—à–±–æ—Ä–¥</h1>
                <div class="header-actions">
                    <button class="btn-icon" id="notificationsBtn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge hidden" id="globalNotificationBadge">0</span>
                    </button>
                    <button class="btn-icon" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button class="btn-icon" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="btn-icon logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </header>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
            <div class="content-container">
                <!-- –î–∞—à–±–æ—Ä–¥ -->
                <div class="tab-content active" id="dashboardTab">
                    <div class="dashboard-grid">
                        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                        <div class="stat-cards">
                            <div class="stat-card primary">
                                <div class="stat-icon"><i class="fas fa-comments"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dashboardActiveChats">0</div>
                                    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</div>
                                </div>
                            </div>
                            <div class="stat-card success">
                                <div class="stat-icon"><i class="fas fa-star"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dashboardRating">0.0</div>
                                    <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
                                </div>
                            </div>
                            <div class="stat-card warning">
                                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dashboardAvgTime">0</div>
                                    <div class="stat-label">–°—Ä. –≤—Ä–µ–º—è (–º–∏–Ω)</div>
                                </div>
                            </div>
                            <div class="stat-card info">
                                <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dashboardSessions">0</div>
                                    <div class="stat-label">–í—Å–µ–≥–æ —Å–µ—Å—Å–∏–π</div>
                                </div>
                            </div>
                        </div>

                        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                        <div class="quick-actions">
                            <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                            <div class="actions-grid">
                                <button class="action-btn" id="quickChats">
                                    <i class="fas fa-comments"></i>
                                    <span>–ú–æ–∏ —á–∞—Ç—ã</span>
                                </button>
                                <button class="action-btn" id="quickListenersChat">
                                    <i class="fas fa-users"></i>
                                    <span>–ß–∞—Ç —Å–ª—É—à–∞—Ç–µ–ª–µ–π</span>
                                </button>
                                <button class="action-btn" id="quickStats">
                                    <i class="fas fa-chart-bar"></i>
                                    <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                                </button>
                                <button class="action-btn" id="quickReviews">
                                    <i class="fas fa-star"></i>
                                    <span>–û—Ç–∑—ã–≤—ã</span>
                                </button>
                            </div>
                        </div>

                        <!-- –ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
                        <div class="recent-activity">
                            <h3>–ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                            <div class="activity-list" id="recentActivity">
                                <div class="loading-state">
                                    <div class="loading-spinner"></div>
                                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ú–æ–∏ —á–∞—Ç—ã -->
                <div class="tab-content" id="chatsTab">
                    <div class="chats-container">
                        <div class="chats-header">
                            <h2>–ú–æ–∏ —á–∞—Ç—ã</h2>
                            <div class="chats-controls">
                                <button class="btn-primary" id="refreshChatsBtn">
                                    <i class="fas fa-sync-alt"></i>
                                    –û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                        </div>
                        <div class="chats-list-container">
                            <div class="chats-list" id="chatsList">
                                <div class="loading-state">
                                    <div class="loading-spinner"></div>
                                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–æ–≤...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ß–∞—Ç —Å–ª—É—à–∞—Ç–µ–ª–µ–π -->
                <div class="tab-content" id="listenersChatTab">
                    <div class="listeners-chat-container">
                        <div class="chat-header">
                            <h2>–û–±—â–∏–π —á–∞—Ç —Å–ª—É—à–∞—Ç–µ–ª–µ–π</h2>
                            <div class="online-count">
                                <span class="online-dot"></span>
                                <span id="onlineListenersCount">0</span> –æ–Ω–ª–∞–π–Ω
                            </div>
                        </div>
                        <div class="chat-interface">
                            <div class="chat-messages" id="listenersChatMessages">
                                <div class="welcome-message">
                                    <div class="welcome-icon"><i class="fas fa-users"></i></div>
                                    <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –æ–±—â–∏–π —á–∞—Ç!</h3>
                                    <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–±—â–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–ª—É—à–∞—Ç–µ–ª—è–º–∏, –¥–µ–ª–∏—Ç—å—Å—è –æ–ø—ã—Ç–æ–º –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã.</p>
                                </div>
                            </div>
                            <div class="chat-input-container">
                                <div class="chat-input">
                                    <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." id="listenersChatInput">
                                    <button class="send-btn" id="sendListenersMessage">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –û—Ç–∑—ã–≤—ã -->
                <div class="tab-content" id="reviewsTab">
                    <div class="reviews-container">
                        <div class="reviews-header">
                            <div class="reviews-stats">
                                <div class="review-stat-card">
                                    <div class="stat-value" id="reviewsAvgRating">0.0</div>
                                    <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                                </div>
                                <div class="review-stat-card">
                                    <div class="stat-value" id="reviewsTotal">0</div>
                                    <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤</div>
                                </div>
                                <div class="review-stat-card">
                                    <div class="stat-value" id="reviewsHelpfulness">0%</div>
                                    <div class="stat-label">–ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å</div>
                                </div>
                            </div>
                        </div>
                        <div class="reviews-list" id="reviewsList">
                            <div class="loading-state">
                                <div class="loading-spinner"></div>
                                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∑—ã–≤–æ–≤...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="tab-content" id="statisticsTab">
                    <div class="statistics-container">
                        <div class="stats-header">
                            <h2>–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                            <div class="period-selector">
                                <select id="statsPeriod">
                                    <option value="week">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                                    <option value="month" selected>–ó–∞ –º–µ—Å—è—Ü</option>
                                    <option value="year">–ó–∞ –≥–æ–¥</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card-large">
                                <div class="stat-header">
                                    <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-item">
                                        <span class="stat-name">–í—Å–µ–≥–æ —Å–µ—Å—Å–∏–π:</span>
                                        <span class="stat-value" id="statTotalSessions">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-name">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤:</span>
                                        <span class="stat-value" id="statCompletedChats">0</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-name">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:</span>
                                        <span class="stat-value" id="statAvgSessionTime">0 –º–∏–Ω</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-name">–û–±—â–µ–µ –≤—Ä–µ–º—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π:</span>
                                        <span class="stat-value" id="statTotalTime">0 —á</span>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-card-large">
                                <div class="stat-header">
                                    <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                                </div>
                                <div class="stat-content">
                                    <div class="activity-chart" id="detailedActivityChart">
                                        <div class="loading-state">
                                            <div class="loading-spinner"></div>
                                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="stat-card-large">
                                <div class="stat-header">
                                    <h3>–†–µ–π—Ç–∏–Ω–≥–∏</h3>
                                </div>
                                <div class="stat-content">
                                    <div class="rating-distribution" id="ratingDistribution">
                                        <div class="loading-state">
                                            <div class="loading-spinner"></div>
                                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner large"></div>
            <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</h3>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
        </div>
    </div>
</body>
</html>
