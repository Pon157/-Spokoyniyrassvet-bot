<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç –°–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/light-theme.css" id="theme-style">
</head>
<body>
    <div class="app-container">
        <!-- –®–∞–ø–∫–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ -->
        <header class="app-header">
            <div class="container">
                <h1 class="logo">üí¨ –ß–∞—Ç–°–∏—Å—Ç–µ–º–∞</h1>
                <div class="header-actions">
                    <div class="theme-selector">
                        <button class="btn btn-icon" id="themeToggle">üé®</button>
                        <div class="theme-dropdown" id="themeDropdown">
                            <div class="theme-option" data-theme="light">üåû –°–≤–µ—Ç–ª–∞—è</div>
                            <div class="theme-option" data-theme="dark">üåô –¢–µ–º–Ω–∞—è</div>
                            <div class="theme-option" data-theme="blue">üîµ –°–∏–Ω—è—è</div>
                            <div class="theme-option" data-theme="green">üü¢ –ó–µ–ª–µ–Ω–∞—è</div>
                            <div class="theme-option" data-theme="purple">üü£ –§–∏–æ–ª–µ—Ç–æ–≤–∞—è</div>
                            <div class="theme-option" data-theme="orange">üü† –û—Ä–∞–Ω–∂–µ–≤–∞—è</div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" id="settingsBtn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
            </div>
        </header>

        <main class="chat-layout">
            <!-- –°–∞–π–¥–±–∞—Ä -->
            <aside class="sidebar">
                <div class="user-profile">
                    <img id="userAvatar" src="/images/default-avatar.png" alt="Avatar" class="avatar">
                    <div class="user-info">
                        <div class="username" id="userName"></div>
                        <div class="user-role" id="userRole"></div>
                        <div class="user-status" id="userStatus"></div>
                    </div>
                </div>

                <nav class="sidebar-nav">
                    <!-- –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    <div id="userSection" class="nav-section hidden">
                        <h3>üëÇ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏</h3>
                        <div class="search-box">
                            <input type="text" id="listenerSearch" placeholder="–ü–æ–∏—Å–∫ —Å–ª—É—à–∞—Ç–µ–ª–µ–π...">
                        </div>
                        <div id="listenersList" class="nav-list"></div>
                        
                        <h3>üí¨ –ú–æ–∏ —á–∞—Ç—ã</h3>
                        <button class="btn btn-outline btn-full" id="showAllChatsUser">üìã –í—Å–µ –º–æ–∏ —á–∞—Ç—ã</button>
                        <div id="userChatsList" class="nav-list"></div>
                    </div>

                    <!-- –î–ª—è —Å–ª—É—à–∞—Ç–µ–ª–µ–π -->
                    <div id="listenerSection" class="nav-section hidden">
                        <h3>üí¨ –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã</h3>
                        <button class="btn btn-outline btn-full" id="showAllChatsListener">üìã –í—Å–µ —á–∞—Ç—ã</button>
                        <div id="listenerChatsList" class="nav-list"></div>
                        
                        <h3>‚≠ê –ú–æ–∏ –æ—Ç–∑—ã–≤—ã</h3>
                        <div id="reviewsSummary" class="reviews-summary"></div>
                        <div id="reviewsList" class="nav-list"></div>
                    </div>

                    <!-- –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ -->
                    <div id="adminSection" class="nav-section hidden">
                        <h3>üõ†Ô∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                        <button class="btn btn-outline btn-full" onclick="window.location.href='/admin'">
                            üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                        </button>
                        <button class="btn btn-outline btn-full" id="viewAllChatsAdmin">
                            üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —á–∞—Ç–æ–≤
                        </button>
                    </div>
                </nav>

                <div class="sidebar-footer">
                    <button id="logoutBtn" class="btn btn-danger btn-full">üö™ –í—ã–π—Ç–∏</button>
                </div>
            </aside>

            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
            <section class="chat-main">
                <div class="chat-header" id="chatHeader">
                    <div class="chat-info">
                        <h3 id="chatTitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è</h3>
                        <div id="chatPartnerInfo" class="partner-info hidden"></div>
                    </div>
                    <div class="chat-actions" id="chatActions">
                        <button id="leaveChatBtn" class="btn btn-secondary hidden">–ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç</button>
                        <button id="addReviewBtn" class="btn btn-primary hidden">‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                    </div>
                </div>

                <div class="messages-container">
                    <div id="messagesList" class="messages-list">
                        <div class="welcome-message">
                            <div class="welcome-icon">üí¨</div>
                            <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç!</h3>
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—â–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–∏–∞–ª–æ–≥</p>
                        </div>
                    </div>
                </div>

                <div class="message-input-container hidden" id="messageInputContainer">
                    <div class="input-actions">
                        <button id="mediaBtn" class="btn btn-icon" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                            üìé
                        </button>
                        <button id="stickerBtn" class="btn btn-icon" title="–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–∫–µ—Ä">
                            üòä
                        </button>
                        <button id="emojiBtn" class="btn btn-icon" title="–°–º–∞–π–ª–∏–∫–∏">
                            üòÄ
                        </button>
                    </div>
                    <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button id="sendBtn" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    
                    <input type="file" id="mediaInput" accept="image/*,video/*,audio/*" style="display: none;">
                    <input type="file" id="stickerInput" accept="image/*" style="display: none;">
                </div>
            </section>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="reviewModal" class="modal hidden">
        <div class="modal-content">
            <h3>‚≠ê –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ —Å–ª—É—à–∞—Ç–µ–ª—é</h3>
            <form id="reviewForm">
                <div class="form-group">
                    <label>–û—Ü–µ–Ω–∫–∞:</label>
                    <div class="rating-stars">
                        <span class="star" data-rating="1">‚òÖ</span>
                        <span class="star" data-rating="2">‚òÖ</span>
                        <span class="star" data-rating="3">‚òÖ</span>
                        <span class="star" data-rating="4">‚òÖ</span>
                        <span class="star" data-rating="5">‚òÖ</span>
                    </div>
                    <input type="hidden" id="reviewRating" value="5">
                    <div class="rating-text" id="ratingText">–û—Ç–ª–∏—á–Ω–æ</div>
                </div>
                <div class="form-group">
                    <label for="reviewComment">–í–∞—à –æ—Ç–∑—ã–≤:</label>
                    <textarea id="reviewComment" rows="4" placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelReview">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                </div>
            </form>
        </div>
    </div>

    <div id="allChatsModal" class="modal hidden">
        <div class="modal-content large">
            <h3 id="allChatsTitle">–í—Å–µ —á–∞—Ç—ã</h3>
            <div class="chats-grid" id="allChatsList"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="closeAllChats">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
