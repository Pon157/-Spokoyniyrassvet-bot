<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç –°–∏—Å—Ç–µ–º–∞ - –ß–∞—Ç</title>
    <link rel="stylesheet" href="css/common.css">
</head>
<body>
    <div class="chat-header">
        <div class="chat-logo">üí¨ –ß–∞—Ç–°–∏—Å—Ç–µ–º–∞</div>
        <div>
            <span id="username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
            <button class="btn btn-primary" onclick="logout()" style="margin-left: 1rem;">–í—ã–π—Ç–∏</button>
        </div>
    </div>
    
    <div class="chat-container">
        <div class="chat-sidebar">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–æ–º</h3>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</p>
            <button class="btn btn-primary" onclick="startChat()" style="width: 100%; margin-top: 1rem;">
                –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç
            </button>
        </div>
        
        <div class="chat-main">
            <div class="messages-container" id="messagesContainer">
                <div class="welcome-message">
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç!</h2>
                    <p>–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç"</p>
                </div>
            </div>
            <div class="message-input-container">
                <input type="text" class="message-input" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." disabled>
                <button class="send-btn" onclick="sendMessage()" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = JSON.parse(localStorage.getItem('user') || '{}');
        document.getElementById('username').textContent = user.username || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        
        function logout() {
            localStorage.clear();
            window.location.href = '/';
        }
        
        function startChat() {
            document.getElementById('messageInput').disabled = false;
            document.querySelector('.send-btn').disabled = false;
            document.querySelector('.welcome-message').style.display = 'none';
            addMessage('–ß–∞—Ç –Ω–∞—á–∞—Ç! –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.', 'other');
        }
        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            addMessage(text, 'own');
            input.value = '';
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
            setTimeout(() => {
                addMessage('–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –æ—Ç —Å–∏—Å—Ç–µ–º—ã. –ß–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!', 'other');
            }, 1000);
        }
        
        function addMessage(text, type) {
            const messagesDiv = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-item message-${type}`;
            messageDiv.textContent = text;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
    </script>
</body>
</html>
